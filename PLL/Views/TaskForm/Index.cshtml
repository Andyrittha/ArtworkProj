<div class="cls_container_taskform">
    <div class="row cls_display_view cls_hide">
        <div class="col-md-12">
            <div style="font-weight:bold;background-color:lightgray;text-align:center;padding:4px;">Display view</div>
        </div>
    </div>
    <div class="row cls_display_txt_over_due cls_hide">
        <div class="col-md-12">
            <div style="font-weight:bold;background-color:#d2322d;text-align:center;padding:4px;color: #fff;">This workitem is over due.</div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-2 control-label">Check list no. :</div>
        <div class="col-md-4"><input disabled type="text" class="cls_header_checklist_no form-control" /></div>
        <div class="col-md-2 control-label">Mockup no. :</div>
        <div class="col-md-4"><input disabled type="text" class="cls_header_mockup_no form-control" /></div>
    </div>
    <div class="row">
        <div class="col-md-2 control-label">Status :</div>
        <div class="col-md-4"><input disabled type="text" class="cls_header_curr_status_txt form-control" /></div>
        <div class="col-md-2 control-label">Reference form no. :</div>
        <div class="col-md-4">
            <div style="padding:3px;padding-left:7px;background-color: #F8F8F8;" class="cls_header_ref_no">
                <a>&nbsp;</a>
            </div>
        </div>
    </div>

    <div class="cls_row_extend_step_duration">
        @*<div class="col-md-2">
                <label class="checkbox-inline" style="font-weight: bold;color:#ed9c28;">
            <input type="checkbox" class="cls_chk_header_tfartwork_extend_duration">Extend step duration
                    </label>
            </div>*@
        <div class="row">
            <div class="col-md-2 control-label">Request to extend step duration :</div>
            <div class="col-md-4">
                @Html.Partial("LOV/ListOfValue", new ViewDataDictionary { { "cls_ddl", "cls_lov_reason" }, { "cls_txtarea", "cls_input_reason_other" } })
                <span class="extend_step_duration_warning" style="color:red;">Warning : If you extend this step, it cannot be change</span>
            </div>
        </div>
        <div class="row">
            <div class="col-md-2 control-label"></div>
            <div class="col-md-3">
                <button type="button" class="cls_btn_header_extend_duration btn btn-warning">Extend</button>
            </div>
        </div>
    </div>

    @if (ViewBag.CURRENT_STEP_CODE_FOR == "Internal")
    {
        <div class="row">
            <div class="col-md-12">
                <button type="button" class="cls_tf_btn_accept btn btn-success">Accept task</button>
            </div>
        </div>
    }
    <hr />
    <ul class="cls_taskform_tab nav nav-tabs">
        @if (ViewBag.CURRENT_STEP_CODE_FOR == "Internal")
        {
            if (ViewBag.HasAuth == "1")
            {
                <li class="cls_li_checklist_data cls_hide">
                    <a href="#view_check_list" data-toggle="tab">Check list data</a>
                </li>
                <li class="cls_li_pg_data cls_hide">
                    <a href="#view_pg" data-toggle="tab">PG data</a>
                </li>
                <li class="cls_li_quotations cls_hide">
                    <a href="#view_price_template" data-toggle="tab">Quotations</a>
                </li>
                <li class="cls_li_quotations_vendor cls_hide">
                    <a href="#view_price_template_vendor" data-toggle="tab">Quotations</a>
                </li>
                <li class="cls_li_internal_department cls_hide">
                    <a href="#view_internal_department" data-toggle="tab">Internal department</a>
                </li>
                <li class="cls_li_vendor cls_hide">
                    <a href="#view_vendor" data-toggle="tab">Vendor</a>
                </li>
                <li class="cls_li_customer cls_hide">
                    <a href="#view_customer" data-toggle="tab">Customer</a>
                </li>
                <li class="cls_li_history cls_hide">
                    <a href="#view_history" data-toggle="tab">History</a>
                </li>
                <li class="cls_li_attachment cls_hide">
                    <a href="#view_attachment" data-toggle="tab">Attachment</a>
                </li>
            }
            else
            {
                <li class="cls_li_checklist_data cls_hide">
                    <a href="#view_check_list" data-toggle="tab">Check list data</a>
                </li>
                <li class="cls_li_pg_data cls_hide">
                    <a href="#view_pg" data-toggle="tab">PG data</a>
                </li>
                <li class="cls_li_internal_department cls_hide">
                    <a href="#view_internal_department" data-toggle="tab">Internal department</a>
                </li>
                <li class="cls_li_vendor cls_hide">
                    <a href="#view_vendor" data-toggle="tab">Vendor</a>
                </li>
                <li class="cls_li_customer cls_hide">
                    <a href="#view_customer" data-toggle="tab">Customer</a>
                </li>
                <li class="cls_li_history cls_hide">
                    <a href="#view_history" data-toggle="tab">History</a>
                </li>
                <li class="cls_li_attachment cls_hide">
                    <a href="#view_attachment" data-toggle="tab">Attachment</a>
                </li>
            }
        }
        @if (ViewBag.CURRENT_STEP_CODE_FOR == "VendorQuo")
        {
            <li class="cls_li_quotations_vendor cls_hide">
                <a href="#view_price_template_vendor" data-toggle="tab">Quotations</a>
            </li>
        }
        @if (ViewBag.CURRENT_STEP_CODE_FOR == "Vendor")
        {
            <li class="cls_li_vendor cls_hide">
                <a href="#view_vendor" data-toggle="tab">Vendor</a>
            </li>
        }
        @if (ViewBag.CURRENT_STEP_CODE_FOR == "Customer")
        {
            <li class="cls_li_customer cls_hide">
                <a href="#view_customer" data-toggle="tab">Customer</a>
            </li>
        }
    </ul>
    <div class="tab-content cls_content_taskform">
        @if (ViewBag.CURRENT_STEP_CODE_FOR == "Internal")
        {
            if (ViewBag.HasAuth == "1")
            {
                <div class="tab-pane" id="view_check_list">
                    @Html.Partial("CheckList")
                </div>
                <div class="tab-pane cls_view_pg_mockup" id="view_pg">
                    @Html.Partial("PG")
                </div>
                <div class="tab-pane" id="view_price_template">
                    @Html.Partial("PriceTemplate")
                </div>
                <div class="tab-pane" id="view_price_template_vendor">
                    @Html.Partial("PriceTemplateVendor")
                </div>
                <div class="tab-pane" id="view_internal_department">
                    @Html.Partial("InternalDepartment")
                </div>
                <div class="tab-pane" id="view_vendor">
                    @Html.Partial("Vendor")
                </div>
                <div class="tab-pane" id="view_customer">
                    @Html.Partial("Customer")
                </div>
                <div class="tab-pane" id="view_attachment">
                    @Html.Partial("Attachment")
                </div>
                <div class="tab-pane" id="view_history">
                    @Html.Partial("History")
                </div>
            }
            else
            {
                <div class="tab-pane" id="view_check_list">
                    @Html.Partial("CheckList")
                </div>
                <div class="tab-pane" id="view_pg">
                    @Html.Partial("PG")
                </div>
                <div class="tab-pane" id="view_internal_department">
                    @Html.Partial("InternalDepartment")
                </div>
                <div class="tab-pane" id="view_vendor">
                    @Html.Partial("Vendor")
                </div>
                <div class="tab-pane" id="view_customer">
                    @Html.Partial("Customer")
                </div>
                <div class="tab-pane" id="view_attachment">
                    @Html.Partial("Attachment")
                </div>
                <div class="tab-pane" id="view_history">
                    @Html.Partial("History")
                </div>
            }
        }
        @if (ViewBag.CURRENT_STEP_CODE_FOR == "VendorQuo")
        {
            <div class="tab-pane" id="view_price_template_vendor">
                @Html.Partial("PriceTemplateVendor")
            </div>
        }
        @if (ViewBag.CURRENT_STEP_CODE_FOR == "Vendor")
        {
            <div class="tab-pane" id="view_vendor">
                @Html.Partial("Vendor")
            </div>
        }
        @if (ViewBag.CURRENT_STEP_CODE_FOR == "Customer")
        {
            <div class="tab-pane" id="view_customer">
                @Html.Partial("Customer")
            </div>
        }
    </div>

    @if (ViewBag.CURRENT_STEP_CODE_FOR == "Internal")
    {
        @Html.Partial("CustomerPopup")
        @Html.Partial("PGPopup")
        @Html.Partial("VendorPopup")
        @Html.Partial("TemplatePopup")
    }

    <div class="modal model2" id="popup_attachment" tabindex="-1" role="dialog" aria-labelledby="popup_attachment_label">
        <div class="vertical-alignment-helper">
            <div class="modal-dialog modal_in_modal vertical-align-center">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="popup_attachment_label">Attachment</h4>
                    </div>
                    <div class="modal-body" style="margin-top:-10px;">
                        @Html.Partial("Attachment")
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal model3" id="popup_attachment_file_version" tabindex="-1" role="dialog" aria-labelledby="popup_attachment_label">
        <div class="vertical-alignment-helper">
            <div class="modal-dialog modal_in_modal vertical-align-center">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="popup_attachment_label">File version</h4>
                    </div>
                    <div class="modal-body" style="margin-top:-10px;">
                        @Html.Partial("AttachmentVersion")
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Back</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @if (ViewBag.CURRENT_STEP_CODE_FOR == "Internal")
    {
        <div class="modal" id="popup_send_to_checklist_creator" tabindex="-1" role="dialog" aria-labelledby="popup_send_to_checklist_creator">
            <div class="vertical-alignment-helper">
                <div class="modal-dialog modal_in_modal vertical-align-center">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="popup_attachment_label">Send back to creator checklist</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-2 control-label">
                                    Send for (Reason) :
                                </div>
                                <div class="col-md-10">
                                    @Html.Partial("LOV/ListOfValue", new ViewDataDictionary { { "cls_ddl", "cls_lov_send_for_reason" } })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="cls_txtedt_send_back_mk" style="height: 80px;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary cls_btn_send_to_mk_submit">Submit</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" id="popup_terminate_workflow_mockup" tabindex="-1" role="dialog" aria-labelledby="popup_terminate_workflow_mockup">
            <div class="vertical-alignment-helper">
                <div class="modal-dialog modal_in_modal vertical-align-center">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="popup_terminate_workflow_mockup">Terminate workflow</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-12 control-label">
                                    Reason :
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    @Html.Partial("LOV/ListOfValue", new ViewDataDictionary { { "cls_ddl", "cls_lov_mockup_reason_terminate" } })
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 control-label">
                                    Comment for terminate workflow :
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="cls_txtedt_terminate_workflow" style="height: 80px;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary cls_btn_submit_terminate_workflow">Submit</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" id="popup_killprocess_workflow_mockup" tabindex="-1" role="dialog" aria-labelledby="popup_killprocess_workflow_mockup">
            <div class="vertical-alignment-helper">
                <div class="modal-dialog modal_in_modal vertical-align-center">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="popup_killprocess_workflow_mockup">Terminate workflow</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-md-12 control-label">
                                    Reason for terminate workflow<span style="color:red;">*</span> :
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="cls_txtedt_terminate_workflow" style="height: 80px;"></div>
                                </div>
                            </div>
                            <input disabled type="text" class="cls_mockup_sub_id_terminate cls_hide form-control">
                            <input disabled type="text" class="cls_mockup_id_terminate cls_hide form-control">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary cls_btn_submit_terminate_workflow">Submit</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
</div>
@section scripts
{
    <script type="text/javascript">
        var ReadOnly = '@ViewBag.ReadOnly';
        var MainMockupSubId = @ViewBag.MainMockupSubId;
        var CanRequestQuo = '@ViewBag.CanRequestQuo';
        var MOCKUPSUBID = @ViewBag.MockupSubId;
        var CheckListID = @ViewBag.CheckListId;
        var DefaultResonId = @(ViewBag.DefaultResonId);
        var DefaultResonTxt = '@(ViewBag.DefaultResonTxt)';
        var WaitingPGSUPSelectQuo = '@(ViewBag.WaitingPGSUPSelectQuo)';
        var MOCKUPID = @ViewBag.MockupId;
        var OverDue = '@ViewBag.OverDue';
        var CreateByFFC = '@ViewBag.CreateByFFC';
        var WORKFLOW_NO = '@ViewBag.Title';
        var WFCompletedOrTerminated = '@ViewBag.WFCompletedOrTerminated';
        var ShowExtendStepDuration = '@ViewBag.ShowExtendStepDuration';
    </script>
    @Scripts.Render("~/bundles/checklistrequest")
    @Scripts.Render("~/bundles/taskform")
    <script type="text/javascript">
        $(document).ready(function () {

            if (OverDue == "1" && WFCompletedOrTerminated == "0")
                $('.cls_container_taskform .cls_display_txt_over_due').show();
            else
                $('.cls_container_taskform .cls_display_txt_over_due').hide();

            if (ShowExtendStepDuration == "1")
                $('.cls_container_taskform .cls_row_extend_step_duration').show();
            else
                $('.cls_container_taskform .cls_row_extend_step_duration').hide();

            $(document).ajaxSuccess(function () {
                if (ReadOnly == "1") {
                    $('.cls_container_taskform .cls_display_view').show();

                    $('input, textarea, select').attr('disabled', true);
                    $(".btn").hide();
                    $(document).find("[data-target='" + '#popup_attachment' + "']").show();

                    $(".cls_pg_price_template .cls_img_lov_delete_row_price_template").hide();
                    $(".cls_table_pg_price_compare .cls_img_delete_price_template_manual").hide();

                    $(".cls_img_end_task_mockup").hide();
                }
            });
        });
    </script>
}

